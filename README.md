# อัพเดตล่าสุด

16 ธันวาคม 2564
- ปรับปรุง api `order history`
    - เพิ่ม id และเลข orderId
    - แสดงผลยอดรวมแบบราคาไทยพร้อมทศนิยม 2 ตำแหน่ง
- ปรับปรุง api `order status`
    - แสดงผลยอดรวมแบบราคาไทยพร้อมทศนิยม 2 ตำแหน่ง
- เพิ่ม api content (ตัวอย่าง Endpoint อัพเดตในไฟล์ postman)
- เพิ่ม response field `tag` ให้กับ api get product ต่างๆ

8 พฤศจิกายน 2564
- ปรับปรุง api `wishlist`
    - เพิ่มระบบนำสินค้าในตะกร้าออก หากสินค้าชิ้นนั้นยกเลิกการขายแล้ว
- ปรับปรุง api `product detail`
    - เพิ่มเช็คสถานะสินค้าว่าอยู่ใน wishlist อยู่แล้วหรือไม่

29 ตุลาคม 2564
- ปรับปรุง api `cart`
    - เพิ่มระบบนำสินค้าในตะกร้าออก หากสินค้าชิ้นนั้นหมดสต็อคแล้ว
    - เพิ่มระบบนำสินค้าในตะกร้าออก หากสินค้าชิ้นนั้นยกเลิกการขายแล้ว
- ปรับปรุงระบบส่งเมล์
- เพิ่ม responsive order mail templete

22 ตุลาคม 2564
- เพิ่ม api `รายการผู้ใช้ทีมียอดสั่งซื้อ Top 10`
- ปรับปรุง api `order` 
    - เพิ่มระบบส่งรายละเอียดการสั่งซื้อไปยังอีเมล์
    - generate เลขการสั่งซื้อ
    - ปรับปรุงการ response ค่าให้นำไปใช้กับใบรายการสั่งซื้อในขั้นตอนสุดท้ายของการสั่งซื้อ
- ปรับปรุง api `cart`
    - แก้ไข error code จาก 404 เป็น 200
    - เพิ่มระบบเช็คจำนวนสินค้าในตะกร้า กับ สินค้าในคลัง และแจ้งเตือนหากสินค้าในตะกร้ามีมากกว่าสินค้าในคลัง พร้อมแก้ไขจำนวนสินค้าในตะกร้าให้เท่ากับสินค้าในคลัง
- ปรับปรุง api `wishlist`
    - แก้ไข error code จาก 404 เป็น 200

18 ตุลาคม 2564
- ปรับปรุงการเรียกใช้ api และการแสดงผลของ cart กับ wishlist โดย api จะแสดงผลอิงตาม user ที่ล็อคอินในปัจจุบัน(ไม่ต้องแนบ userId แล้ว) และcart จะคำนวณจำนวนสินค้ารวมในตะกร้า และ ยอดรวมราคาสินค้านั้นๆ
- เพิ่ม api order โดยใส่แค่ที่อยู่ของออเดอร์นั้นเพิ่มเติมเข้าไป
*(api มีการเก็บราคาสินค้าทั้งราคาเต็มและราคาลด ณ ตอนสั่งซื้อ ลงในข้อมูลออเดอร์นั้นๆ เพื่อนำไปแสดงผล กรณีลูกค้าเข้ามาดูประวัติสั่งซื้อย้อนหลัง แต่ชื่อสินค้าและรูปภาพจะดึงมาจากข้อมูลสินค้าปัจจุบัน)

6 ตุลาคม 2564
- แก้ไขการสร้าง cart กับ wishlist ให้สร้างไปพร้อมกับการสมัครสมาชิกเลย
- แก้ไขรูปภาพโลโก้ F&N ในอีเมล์ต้อนรับผู้ใช้ใหม่ และ อีเมล์รีเซ็ทรหัสผ่าน

4 ตุลาคม 2564
- แก้ไขการเพิ่มสินค้าเข้า cart และ wishlist โดยจะเช็คว่าถ้าไม่มีสินค้าอยู่จะเพิ่มเข้าไปใน array ใหม่ แต่ถ้ามีอยู่แล้วจะเพิ่มจำนวนใหม่ไปรวมกับจำนวนเดิมใน array
- แก้ไขการลบสินค้าจาก cart และ wishlist
- ปรับปรุง viewcount โดยใส่ id สินค้า แล้ว api จะนับ+1 ให้เอง
- เพิ่ม spending (นำไปใช้นับผู้ใช้ที่มียอดสั่งซื้อมากที่สุด) โดยใส่ id ผู้ใช้ พร้อมใส่ยอดรายการสั่งซื้อล่าสุดเข้ามา แล้ว api จะนับ+ของเดิมให้เอง
- เพิ่มการแก้ไขข้อมูลผู้ใช้ (อิงตาม user cookie)
# คำแนะนำ

- ข้อมูล API ที่เป็นตัวอย่างจะชื่อไฟล์ F&N-Ecommerce.postman_collection สามารถนำไปใช้งานได้เลยโดยนำไป import ในโปรแกรม Postman

- ให้ Copy `.env.example` มาอีกอัน แล้วเปลี่ยนชื่อเป็น `.env` เพื่อให้ project สามารถใช้ environment variables ได้

- สั่ง `npm run dev` ให้ Service ทำงานใน Development Mode

# Services

- API จะเข้าผ่าน `http://localhost:3000/api`
- API ที่มีการแสดงค่าในรูปแบบ pagination ด้วย จะสามารถกำหนดค่าต่างๆในส่วน parameter ต่อท้าย api ได้ดังนี้
    - limit=20 เป็นการกำหนดค่าจำนวนที่แสดงข้อมูลต่อ 1 หน้า
    โดยค่า 20 ในตัวอย่างสามารถแทนด้วยเลขที่ต้องการตั้งค่าได้
    - page=2 เป็นการเปลี่ยนหมายเลขหน้าที่จะแสดงข้อมูล
    โดยค่า 2 ในตัวอย่างสามารถแทนด้วยเลขที่ต้องการตั้งค่าได้
- ตัวอย่างการใช้งานการต่อท้าย api ด้วย parameter
`http://localhost:3000/api/brand?limit=1&page=2`
